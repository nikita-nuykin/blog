title: NAS
link: nas
published_date: 2023-11-15
___

Здесь не будет скринов и фото. Мне лень.\
Зато будут ошибки, словесный мусор и дисгармония стиля. Enjoy.

## Что такое NAS?

Это сервер для хранения данных (файлов).

По сути, это компьютер со специальной ОС, который используется в основном как облачное хранилище. Так же на нем можно запускать всякие виртуальные машины, разворачивать docker-контейнеры, поднимать сервисы. В общем, использовать в качестве сервера.

Особенность в том, что зачастую он работает 24/7, отчего энергоэффективность является немаловажной характеристикой.

## Мотивация

Скука, жажда поиграть с новым железом, фоновое желание уйти от хранения фотографий счетчиков на серверах злых корпораций.

## Выбор и конфигурация

NAS можно собрать самому: есть масса видиков и статей со сборками, откуда можно почерпнуть инфу по подходящему железу. Много опций ОС, обычно ставят [TrueNAS](https://www.truenas.com/truenas-core/) или [Unraid](https://unraid.net/).

Так же можно купить готовый вариант с проприетарной ОС от производителя. Дороже, но plug and play.

Мне не особо хотелось разбираться в железе, важнее было попробовать концепцию, насколько это вообще нужно/полезно на практике, поэтому пошел по второму варианту.

Youtube и статьи по теме привели меня к [Synology ds220+](https://www.synology.com/ru-ru/products/DS220+) — домашнему варианту на два диска.

Сборка (и стоимость):
- Synology ds220+ (30к новый на авито)
- 2x 3TB HDD (~8к за один)
- RAM 8gb (~2к)
- UPS (~4к)

Жесткие диски взял по 3 терабайта: файлов у меня не много, но хочется иметь возможность держать небольшую коллекцию фильмов. Брал из расчета на то, что настрою RAID 1, это когда один диск зеркалит другой, то есть при поломке одного, все данные остаются на другом.

В моей модели NAS всего 2гб встроенной оперативной памяти. Мне этого показалось мало, докупил еще 8, благо есть слот под расширение.

UPS брать не планировал, но как-то вернувшись домой обнаружил NAS выключенным. Оказалось, что ненадолго отключалось электричество. Если бы в этот момент была запись на диск, то данные были бы потеряны. На такой случай решил подключить NAS к UPS.

## Что настроил и чем пользуюсь

Все в основном в контексте того ПО, что доступно на конкретно моем девайсе.

### Доступ извне

Чтобы была возможность подключаться не только из локальной сети, настроил доступ извне по домену.\
Делается это через DDNS (Динамический DNS): когда IP меняется, обновляется запись в DNS.

Так же добавил пользователей с разными уровнями доступа под задачи.

### Хранение файлов

Перенес все данные с Google Drive и других хранилищ на NAS.

У Synology есть сервис Drive — это аналог Google Drive, там есть свой пакет Office с возможностью онлайн совместно редактировать всякие документы, можно шерить файлы, короче почти то же самое, но файлы хранятся у тебя.

Так же есть Synology Photos — упрощенный аналог google photos. Модельки определения лиц работают не так хорошо, как у гугла, одного человека с разными прическами считает за разных, но можно вручную объединить. Крутая обработка фото отсутствует. Зато файлы не покидают твоих устройств и не обрабатываются где-то там. \
Им я тоже воспользовался: перенес из гугла, настроил на телефоне автоматическую подливку.

### Plex

[Plex](https://www.plex.tv/) — это стриминговый сервис, который можно развернуть у себя, а затем подключаться к нему с других устройств (ТВ/Смартфон/Web) и смотреть фильмы/сериалы, который ты _абсолютно легально_ скачал.\
Я развернул его на nas и теперь стримлю сам себе контент на телевизор.

Под скачивание контента развернул приложение Download station, которому можно скармливать ссылки/torrent-файлы, а он качает в папочку для Plex.

### Obsidian Vault

Люблю писать заметки. Люблю кроссплатформенные приложения. Люблю markdown. Не очень люблю зависеть от компаний.

Так что под шумок переехал с Upnote на Obsidian, сделав на NAS хранилище под заметки.\
На телефоне это выглядит как папка, которая постоянно синхронизируется с NAS, Obsidian настроен на нее.\
На ноутах прямо через finder подключаюсь к nas, это выглядит как сетевая папка, которую скармливаю Obsidian. Неожиданный бонус — шеринг конфига приложения: сменил тему, обновилась везде.

## Впечатления и планы

Прошло меньше двух недель, пожалуй рано давать полноценный отзыв. Но на текущий момент меня полностью устраивает тот флоу работы с файлами (документы, фото, медиа, заметки), который я настроил. Не возникало желания или потребности возвращаться к прежнему.\
Пока ставлю класс.

В будущем планирую поиграться с Docker, как минимум поднять Postgres для всяких редких pet-проектов.
